!function(n,t,i){"use strict";function r(n,e){return function(e,r){return new t.Observable(function(n){return{unsubscribe:e.onSnapshot(r||{},n)}})}(n,e)}function e(n,e){return r(n,e)}function o(n,e){return r(n,e)}var c=function(){return(c=Object.assign||function(n){for(var e,r=1,t=arguments.length;r<t;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}).apply(this,arguments)};function u(n){return e(n)}function d(n,e){var r;return c({},n.data(),e?((r={})[e]=n.id,r):null)}var f=["added","modified","removed"],a=function(o){return i.filter(function(n){for(var e=!1,r=0;r<n.length;r++){var t=n[r];if(o&&0<=o.indexOf(t.type)){e=!0;break}}return e})},l=i.filter(function(n){return 0<n.length});function p(n,e){return void 0===e&&(e=f),o(n).pipe(i.map(function(n){return n.docChanges()}),a(e),l)}function s(n){return o(n).pipe(i.map(function(n){return n.docs}))}n.auditTrail=function(n,e){return p(n,e).pipe(i.scan(function(n,e){return n.concat(e)},[]))},n.collection=s,n.collectionChanges=p,n.collectionData=function(n,e){return s(n).pipe(i.map(function(n){return n.map(function(n){return d(n,e)})}))},n.doc=u,n.docData=function(n,e){return u(n).pipe(i.map(function(n){return d(n,e)}))},n.fromCollectionRef=o,n.fromDocRef=e,n.fromRef=r,n.snapToData=d,n.sortedChanges=function(n,r){return p(n,r).pipe(i.scan(function(n,e){return function(e,n,r){return void 0===r&&(r=f),n.forEach(function(n){-1<r.indexOf(n.type)&&(e=function(n,e){switch(e.type){case"added":n[e.newIndex]&&n[e.newIndex].doc.id===e.doc.id||n.splice(e.newIndex,0,e);break;case"modified":null!=n[e.oldIndex]&&n[e.oldIndex].doc.id!==e.doc.id||(e.oldIndex!==e.newIndex?(n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e)):n[e.newIndex]=e);break;case"removed":n[e.oldIndex]&&n[e.oldIndex].doc.id===e.doc.id&&n.splice(e.oldIndex,1)}return n}(e,n))}),e}(n,e,r)},[]))}}(this.rxfire=this.rxfire||{},rxjs,rxjs.operators);
//# sourceMappingURL=rxfire-firestore.js.map
